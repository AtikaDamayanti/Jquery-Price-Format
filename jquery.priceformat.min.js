!function(n){n.fn.priceFormat=function(t){var r={prefix:"US$ ",suffix:"",centsSeparator:".",thousandsSeparator:",",limit:!1,centsLimit:2,clearPrefix:!1,clearSufix:!1,allowNegative:!1,insertPlusSign:!1,clearOnEmpty:!1,leadingZero:!0},t=n.extend(r,t);return window.ctrl_down=!1,n(window).bind("keyup keydown",function(n){return window.ctrl_down=n.ctrlKey,!0}),this.each(function(){function r(n){p.is("input")?p.val(n):p.html(n),p.trigger("pricechange")}function i(){return d=p.is("input")?p.val():p.html()}function e(n){for(var t="",r=0;r<n.length;r++)char_=n.charAt(r),0==t.length&&0==char_&&(char_=!1),char_&&char_.match(m)&&(b?t.length<b&&(t+=char_):t+=char_);return t}function a(n){for(;n.length<x+1;)n="0"+n;return n}function o(t,r){if(!r&&(""===t||t==o("0",!0))&&O)return"";var i=a(e(t)),c="",u=0;0==x&&(_="",f="");var f=i.substr(i.length-x,x),l=i.substr(0,i.length-x);if(i=P?l+_+f:"0"!==l?l+_+f:_+f,w||""!=n.trim(w)){for(var s=l.length;s>0;s--)char_=l.substr(s-1,1),u++,u%3==0&&(char_=w+char_),c=char_+c;c.substr(0,1)==w&&(c=c.substring(1,c.length)),i=0==x?c:c+_+f}return!k||0==l&&0==f||(i=t.indexOf("-")!=-1&&t.indexOf("+")<t.indexOf("-")?"-"+i:F?"+"+i:""+i),v&&(i=v+i),g&&(i+=g),i}function c(n){var t=n.keyCode?n.keyCode:n.which,i=String.fromCharCode(t),e=!1,a=d,c=o(a+i);(t>=48&&t<=57||t>=96&&t<=105)&&(e=!0),8==t&&(e=!0),9==t&&(e=!0),13==t&&(e=!0),46==t&&(e=!0),37==t&&(e=!0),39==t&&(e=!0),!k||189!=t&&109!=t&&173!=t||(e=!0),!F||187!=t&&107!=t&&61!=t||(e=!0),t>=16&&t<=20&&(e=!0),27==t&&(e=!0),t>=33&&t<=40&&(e=!0),t>=44&&t<=46&&(e=!0),window.ctrl_down&&(86==t&&(e=!0),67==t&&(e=!0),88==t&&(e=!0),82==t&&(e=!0),84==t&&(e=!0),76==t&&(e=!0),87==t&&(e=!0),81==t&&(e=!0),78==t&&(e=!0),65==t&&(e=!0)),e||(n.preventDefault(),n.stopPropagation(),a!=c&&r(c))}function u(){var n=i(),t=o(n);n!=t&&r(t),0==parseFloat(n)&&O&&r("")}function f(){p.val(v+i())}function l(){p.val(i()+g)}function s(){if(""!=n.trim(v)&&y){var t=i().split(v);r(t[1])}}function h(){if(""!=n.trim(g)&&S){var t=i().split(g);r(t[0])}}var p=n(this),d="",m=/[0-9]/;d=p.is("input")?p.val():p.html();var v=t.prefix,g=t.suffix,_=t.centsSeparator,w=t.thousandsSeparator,b=t.limit,x=t.centsLimit,y=t.clearPrefix,S=t.clearSuffix,k=t.allowNegative,F=t.insertPlusSign,O=t.clearOnEmpty,P=t.leadingZero;F&&(k=!0),p.bind("keydown.price_format",c),p.bind("keyup.price_format",u),p.bind("focusout.price_format",u),y&&(p.bind("focusout.price_format",function(){s()}),p.bind("focusin.price_format",function(){f()})),S&&(p.bind("focusout.price_format",function(){h()}),p.bind("focusin.price_format",function(){l()})),i().length>0&&(u(),s(),h())})},n.fn.unpriceFormat=function(){return n(this).unbind(".price_format")},n.fn.unmask=function(){var t,r="";t=n(this).is("input")?n(this).val()||[]:n(this).html();for(var i=0;i<t.length;i++)isNaN(t[i])&&"-"!=t[i]||(r+=t[i]);return r},n.fn.priceToFloat=function(){return parseFloat(n(this).val())}}(jQuery);